<div data-controller="daily-records--mood-score range-slider--current-mood">
  <%= form_with url: url, method: method, scope: :daily_record,
    class: "bg-white rounded-2xl border border-gray-200 shadow-sm p-5 md:p-6" do |f| %>

    <!-- 現在の気分表示 -->
    <div class="mb-8">
      <label for="mood-range" class="my-4 block text-sm font-semibold text-[#25625d]">気分</label>
      <div class="flex items-center justify-center gap-2 rounded-xl bg-[#F3FBFA] p-3 text-[#25625d]">
        <span id="current-mood-icon" class="text-2xl"></span>
        <span id="current-mood" class="text-sm font-medium"></span>
        <span class="text-sm text-gray-500">（<span id="current-mood-score"></span>）</span>
      </div>
    </div>

    <!-- スライダー -->
    <div class="mb-6">
      <div class="mt-3 w-full">
        <%= f.range_field :mood_score,
          in: -5..5,
          id: "mood-range",
          data: { action: "input->daily-records--mood-score#update input->range-slider--current-mood#updateColor" },
          class: "w-full accent-[#67BDB7] cursor-pointer" %>
      </div>
      <div class="mt-1 flex justify-between text-xs text-gray-400">
        <span>-5</span><span>0</span><span class="mr-4">+5</span>
      </div>
    </div>

    <!-- メモ -->
    <div class="mb-6">
      <label class="block text-sm font-semibold text-[#25625d]">気付きメモ（任意）</label>
      <%= f.text_area :memo,
      rows: 5,
      placeholder: "散歩後に寝込んでしまうことが増えてきたので、回数か距離を減らしてみようと思う...!",
      class: "mt-2 w-full rounded-xl border border-gray-200 bg-white p-4 text-sm text-gray-800 placeholder:text-gray-400 focus:outline-none focus:ring-4 focus:ring-[#67BDB7]/20 focus:border-[#67BDB7]" %>
    </div>

    <!-- ザワザワ切替 -->
    <div class="mb-2">
      <p class="text-sm font-semibold text-[#25625d]">心のざわつき</p>
      <p class="mt-1 text-xs text-gray-500">ざわざわしている日はチェックしてください。</p>

      <label class="inline-flex items-center cursor-pointer mt-2">
        <%= f.check_box :is_uneasy, class: "sr-only peer" %>
        <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4
                    peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer
                    dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full
                    peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px]
                    after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full
                    after:h-5 after:w-5 after:transition-all dark:border-gray-600
                    peer-checked:bg-blue-600">
        </div>
      </label>
    </div>

    <!-- 送信 -->
    <div class="mt-6">
      <%= f.submit "記録する",
        class: "w-full rounded-xl bg-[#67BDB7] px-4 py-3 text-center text-sm font-semibold text-white shadow-sm transition
                    hover:opacity-95 active:scale-[0.99] focus:outline-none focus:ring-4 focus:ring-[#67BDB7]/30" %>
    </div>
  <% end %>
</div>
