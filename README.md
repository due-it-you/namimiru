# ナミミル
## ■サービス概要
双極性障害の方向けのWebアプリで、気分の波を記録することで自身の現在の状態をグラフとして確認することが出来ます。　また、その記録を周囲の家族などの支援者と共有することができます。　LINE連携をすることで、LINEから記録作成や記録確認などの操作を気軽に行えます。

## ■ このサービスへの思い・作りたい理由
私の母親が双極性障害Ⅱ型を持っており、双極性障害は周期的な精神的/体力的な波のサイクルがあります。　その波の周期が日常の中で共有出来ていると問題ないのですが、私の母は自身の体力的／精神的現状を伝えにくく、私や私の父はそれをあまり直接的に聞く機会はありませんでした。　このようになると、**私の母の『実際の現状の状態』と、私と私の父が考える『想像している現状の状態』に差異が生まれてしまい、結果的に周囲の人が当事者である母に対して、現状の体力や精神状態では難しい要求をしてしまったりしてしまう問題が生じました。**　

これは当事者の方は勿論のこと、その周囲の人も悪くなく、**単に病気というセンシティブなものなのでどうしても聞きづらかったり、何らかの理由で聞く機会が少なくなってしまっていることで発生している問題**です。この時に私は、レールを敷いて道筋をあらかじめ用意してあげれば、双方の問題を解決出来ると思いました。　そこで、私は**当事者が簡単に気分/体力の波を記録して、それをいつでも周囲の人が確認出来るようなアプリを開発しようと思い着手**しました。

## ■ ユーザー層について
『双極性障害を持っている方』や、『その周囲のサポートしてくれている方』、その中でも特に『**遠方に暮らしていたり、仕事が忙しくて会話をする機会が少なかったりしながらも、普段から双極性障害の当事者をサポートしてくれている方**』などを対象にしています。

当事者だけではなく、その周囲の人にとっても、情報の共有を見れることで出来る限り齟齬を発生させずにサポートすることが出来るため、双方にとってメリットがあるため、どちらの層も対象にしています。

## ■サービスの利用イメージ
双極性障害の当事者であるユーザーは日々記録を行っていくことで自身の状況を俯瞰して確認でき、その地点での自身の『出来ること』『難しいこと』を判断していく手助けになります。

また、当事者の周囲のサポートしているユーザーは自分の好きなタイミングですぐに当事者のユーザーの現在の状況やこれまでの推移を共有されたグラフから確認することができ、それによってこれから来る状況に合わせて心づもりしたり、適切な支援の判断をする手助けになります。

## ■ ユーザーの獲得について
- アプリの開発のある程度の段階からショート動画を投稿する
- 『双極性障害 アプリ』の検索ワードを狙ってSEOを向上させオーガニックな検索流入を狙う
- プレスリリースを掲載できるかを試してみる

## ■ サービスの差別化ポイント・推しポイント
気分の波を記録して共有するアプリは存在しますが、LINEから一連の操作が可能なアプリはありません。　また、双極性障害は周期的な波があることから、将来的に双極性障害に特化した機能を実装する予定となっています。（『周期ごとの振幅の大きさの推移のデータ表示機能』や『鬱転や躁転のタイミングに合わせてLINEプッシュ通知機能』など）
更に、やはり当事者の現状を自分からグラフを見るのはつい忘れてしまいがちになると思うので、定期的に支援者側にグラフの確認を催促するプッシュ通知があるのは非常に便利です。

| 項目  | 本サービス | 競合サービスA | 競合サービスB |
| ------------- | ------------- | ------------- | ------------- |
| 双極性障害に合わせたグラフの情報の表示  | ◎| △| ×|
| 双極性障害に特化した機能  | ◎| △| ×|
| 柔軟な通知設定  | ◎| ◯| △|
| LINEとの連携 | ◎| ×| ×|

## ■ 機能候補
### MVPリリース
#### 認証機能
- Emailでの新規登録機能
- ソーシャルログイン（LINE, Google）でのログイン機能
- パスワードの再登録機能
- ゲストログイン機能

#### 記録に関する機能
- 記録の作成機能
- 記録の更新機能
- 記録の詳細表示機能
- 記録の削除機能
- 記録のグラフ表示

#### アカウント同士の連携機能
- 招待コードを用いた他のユーザーとの連携機能
- 連携しているアカウントの表示名などを変更する機能
- 連携解除機能
- 記録のグラフなどの共有機能（支援者のユーザーが連携している当事者のユーザーのグラフを確認できる）

#### 通知機能
- PWAによってプッシュ通知された情報が一覧で確認できる機能

#### PWAによる機能
- 固定時刻での日々の記録のリマインド通知機能（MVP段階では`gem whenever`を用いた固定の時刻でのリマインド機能）
- 固定の頻度と時刻で、連携している当事者のユーザーがいる場合、グラフの画面を定期的にプッシュ通知機能（上記同様、固定の頻度と時刻）

### 本リリース
#### 記録に関する機能
- グラフの表示する期間の変更機能
- グラフの周期ごとのデータの推移を確認できる機能（相対的に振幅が小さくなっているか大きくなっているかなどの情報は医師が診断して今後の治療の方針を決めていく上でも非常に重要なデータなので、それらを表示してあげる）
- グラフの状況をまとめたメールの定期配信
- メールの自動送信期間の変更

#### PWAによる機能
- 日々の記録のリマインド通知をユーザーが任意の時刻で設定できる機能（本リリース段階で`sidekiq`, `redis`を用いて実装）
- 連携している当事者のユーザーがいる場合のグラフの画面を定期的にプッシュ通知する頻度と時刻をユーザーが設定できる機能（上記同様）

#### LINE公式アカウント
LINE公式アカウントのリッチメニューから以下の機能が使えます。
- 記録のCRUD機能
- グラフの表示機能

## ■ 機能の実装方針予定
- ログイン機能 => gem 'devise'
- 招待機能 => gem 'devise_invitable'
- グラフの表示 => Chart.jsライブラリ
- プッシュ通知の定期的実行とその間隔と時刻の動的変更 => sidekiq/redisによる非同期なバックグランドジョブ処理

| 項目  | |
| ------------- | ------------- |
| フロントエンド  | Hotwire, Javascript, TailwindCSS v4.1 |
| バックエンド  | Ruby 3.3.7 / Rails 7.2.2 |
| データベース  | PostgreSQL 17.4 |
| 開発環境  | Docker |
| インフラ  | Render |
| API  | LINELoginAPI |

## 画面遷移図
Figma： https://www.figma.com/design/P8wlRzMppgU8NsghayaNfQ/%E3%83%8A%E3%83%9F%E3%83%9F%E3%83%AB-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E5%9B%B3?node-id=0-1&p=f&t=zZ5NbV9yDZlaifJu-0

### READMEに記載した機能
#### 認証機能
- [x] Emailでの新規登録機能(ユーザーネームもその時に登録)
- [x] ソーシャルログインでのログイン機能
- [x] パスワードの再登録機能
- [x] ゲストログイン機能 

#### 記録に関する機能
- [x] 記録の作成機能
- [x] 記録の更新機能
- [x] 記録の詳細表示機能
- [x] 記録の削除機能
- [x] 記録のグラフ表示

- [x] グラフの表示する期間の変更機能
- [x] グラフの状況をまとめたメールの定期配信
- [x] メールの自動送信期間の変更

#### アカウント同士の連携機能
- [x] 招待コードを用いた他のユーザーとの連携機能
- [x] 連携しているアカウントの表示名などを変更する機能
- [x] 連携解除機能
- [x] 記録のグラフなどの共有機能（支援者のユーザーが連携している当事者のユーザーのグラフを確認できる）

#### PWAによる機能
- [x] 日々の記録を催促する毎日の決まった時間に来るプッシュ通知機能（プッシュ通知が来る時間を選択できる）
- [x] 連携している当事者のユーザーがいる場合、グラフの画面を定期的にプッシュ通知機能

### 未ログインでも閲覧または利用できるページ
- [x] 記録作成画面
- [x] グラフ詳細画面
- [x] 記録一覧画面
- [x] 記録詳細画面
- [x] 記録編集画面

- [x] 連携アカウント一覧画面
- [x] 連携アカウント詳細画面

- [x] アカウント情報詳細画面
- [x] アカウント情報編集画面

- [x] 利用規約ページ
- [x] プライバシーポリシーページ
- [x] 問い合わせページ

### メールアドレス・パスワード変更確認項目
直接変更できるものではなく、一旦メールなどを介して専用のページで変更する画面遷移になっているか？
- [x] メールアドレス
- [x] パスワード

### 各画面の作り込み
画面遷移だけでなく、必要なボタンやフォームが確認できるくらい作り込めているか？
- [x] 作り込みはある程度完了している（Figmaを見て画面の作成ができる状態にある）
