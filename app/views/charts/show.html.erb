<div>
  <div>
    <%= render 'shared/flash_message' %>
  </div>
  <div class="flex">
    <% if @user.name.blank? %>
      ユーザーネーム未設定
    <% else %>
      <div class="font-semibold">
        <%= @user.name %>
      </div>
    <% end %>
    <span class="font-semibold text-string-base text-md">さんのグラフ</span> 
  </div>
  <div>
    <select class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 my-2">
      <option value="last_week">直近1週間</option>
      <option value="last_month">直近1ヶ月</option>
      <option value="last_3_months">直近3ヶ月</option>
      <option value="last_6_months">直近6ヶ月</option>
      <option value="last_year">直近1年間</option>
      <option value="all_time">全期間</option>
    </select>
  </div>
  <div>
    <canvas 
          height="350" 
          id="myChart"
          class="my-4"
          data-controller="charts--display"
          data-chart-labels="<%= @labels.to_json %>"
          data-chart-data="<%= @data.to_json %>">
    </canvas>
  </div>
  <div>
    <div>
      <p class="font-semibold text-string-base text-md mt-8 mb-4">前回の記録</p> 
    </div>
    <!-- 直近一件の記録 -->
    <% if @latest_record.present? %>
      <div id="latest-record" class="border border-border-base p-4 rounded-md text-string-base">
        <div class="text-sm flex">
          <%= @latest_record.created_at.strftime("%Y/%m/%d %H:%M") %>
          <% if @latest_record.is_uneasy %>
            <div class="ml-2">
              ❤️💭
            </div>
          <% end %>
        </div>  
        <div class="my-2">
          <span class="text-md">気分： </span>
          <span class="font-semibold text-xl">
            <%= mood_display(@latest_record.mood_score) %>
            （<%= @latest_record.mood_score %>）
          </span>
        </div>
        <div class="font-light">
          <%= @latest_record.memo %>
        </div>
      </div>
    <% end %>
  </div>
  <div>
    <%= link_to "さらに過去の記録を見る", user_daily_records_path(@user.id), class: "border border-border-base block w-full mt-4 py-2 text-center text-string-base font-semibold bg-white rounded-md" %>
  </div>
</div>
